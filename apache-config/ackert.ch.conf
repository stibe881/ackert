<VirtualHost *:80>
    ServerName ackert.ch
    ServerAlias www.ackert.ch

    # Reverse Proxy zur Next.js-Anwendung
    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    # WebSocket-Unterstützung (für Hot Reload während Entwicklung)
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://localhost:3000/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://localhost:3000/$1 [P,L]

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/ackert.ch-error.log
    CustomLog ${APACHE_LOG_DIR}/ackert.ch-access.log combined
</VirtualHost>

# Optional: HTTPS-Konfiguration (empfohlen!)
# Uncomment nach SSL-Zertifikat Installation (z.B. mit Let's Encrypt)
#<VirtualHost *:443>
#    ServerName ackert.ch
#    ServerAlias www.ackert.ch
#
#    SSLEngine on
#    SSLCertificateFile /etc/letsencrypt/live/ackert.ch/fullchain.pem
#    SSLCertificateKeyFile /etc/letsencrypt/live/ackert.ch/privkey.pem
#
#    ProxyPreserveHost On
#    ProxyPass / http://localhost:3000/
#    ProxyPassReverse / http://localhost:3000/
#
#    RewriteEngine On
#    RewriteCond %{HTTP:Upgrade} =websocket [NC]
#    RewriteRule /(.*)           ws://localhost:3000/$1 [P,L]
#    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
#    RewriteRule /(.*)           http://localhost:3000/$1 [P,L]
#
#    ErrorLog ${APACHE_LOG_DIR}/ackert.ch-ssl-error.log
#    CustomLog ${APACHE_LOG_DIR}/ackert.ch-ssl-access.log combined
#</VirtualHost>
